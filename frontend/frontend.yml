  #setting up frontend
   # install Nginx
    #install a dnf package collection
  #Remove the default content that webserver is serving means we delete the directory
  #create the file which you just deleted

  #Placing Expense Config File in Nginx
  #Download and extract and unzip the file the frontend file which is saved on the remote location
  # # start and enable Nginx


  - name: Frontend Setup
    hosts: all
    become: yes
    tasks:
      - name: Installing Nginx
        ansible.builtin.dnf:
          name: nginx
          state: present

      - name: Placing Expense Config File in Nginx
        ansible.builtin.copy:
          src: expense.conf
          dest: /etc/nginx/default.d/expense.conf

      - name: Removing old Nginx content(deleting the directory)
        ansible.builtin.file:
          path: /usr/share/nginx/html
          state: absent

      - name: creating Nginx content directory
        ansible.builtin.file:
          path: /usr/share/nginx/html
          state: directory

      - name: Download frontend code and extract frontend code
        ansible.builtin.unarchive:
          src: https://expense-artifacts.s3.amazonaws.com/frontend.zip
          dest: /usr/share/nginx/html
          remote_src: yes

      - name: starting nginx service
        ansible.builtin.systemd:
          name: nginx
          state: restarted
          enabled: yes













